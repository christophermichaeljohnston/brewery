{% extends "base/index.html" %}
{% block content %}
<div class="container-fluid p-3">
  <div class="card card-table">
    <div class="card-header">
      <div class="d-flex flex-row">
        <div>Fermenter</div>
        <div class="ml-auto"><a class="btn btn-light btn-sm" href="{% url 'fermenter:edit' fermenter.id %}"><i class="far fa-edit"></i> Edit</a></div>
      </div>
    </div>
    <div class="card-body table-responsive">
      <table class="table table-borderless table-striped">
        <thead>
          <tr>
            <th>name</th>
            <th>beer</th>
            <th>mode</th>
            <th>setpoint</th>
            <th>temperature</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>{{ fermenter.name }}</td>
            <td>{% if fermenter.beer %}<a class="text-secondary" href="{% url 'beer:detail' fermenter.beer.id %}">{{ fermenter.beer.name }}</a>{% else %}empty{% endif %}</td>
            <td>{{ fermenter.get_mode_display }}</td>
            <td>{{ fermenter.setpoint }} F</td>
            <td>{{ fermenter.temperature }} F <small><small>({{ fermenter.datetime|timesince }} ago)</small></small></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <div class="card card-table mt-4">
    <div class="card-header">
      Tasks
    </div>
    <div class="card-body table-responsive">
      <table class="table table-striped table-borderless">
        <thead>
          <tr>
            <th>task</th>
            <th>run_at</th>
            <th>last_error</th>
          </tr>
        </thead>
        <tbody>
{% for task in tasks %}
          <tr>
            <td>{{ task.verbose_name }}</td>
            <td class="text-nowrap">{{ task.run_at|timeuntil }}</td>
            <td class="text-nowrap">{{ task.last_error }}</td>
          </tr>
        </tbody>
{% endfor %}
      </table>
    </div>
  </div>
</div>
{% endblock content %}
